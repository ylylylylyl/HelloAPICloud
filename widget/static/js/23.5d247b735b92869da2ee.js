webpackJsonp([23],{"2yKt":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("oFuF");var s=e("Ia3L"),i={data:function(){return{typedata:[{value:1,text:"消防"},{value:2,text:"照明"},{value:3,text:"暖气"},{value:4,text:"马桶"},{value:5,text:"桌椅"},{value:6,text:"其他"}],uploadimg:"",date:"",postData:{},root:"http://192.168.43.129:8080/"}},mounted:function(){this.postData.villageid=this.$cookies.get("CUR_BINDINFO").villageid,this.postData.bindid=this.$cookies.get("CUR_BINDINFO").bindid},methods:{initRepair:function(){var t=this,a=new mui.PopPicker;a.setData(this.typedata);document.getElementById("type-btn");var e=document.getElementById("type-result");a.show(function(a){e.innerText=a[0].text,t.postData.repairtype=a[0].value})},initDate:function(){var t=this,a=new Date;a.setMonth(a.getMonth()+1);var e=new mui.DtPicker({beginDate:new Date,endDate:new Date(a)});e.show(function(a){document.getElementById("date-result").innerText=a.text,t.postData.appointmenttime=a.text,e.dispose()})},upload:function(){this.$refs.fileBtn.click()},goback:function(){this.$router.go(-1)},changeImage:function(t){var a=this,e=t.target.files[0];if(e){var s=new FileReader;s.readAsDataURL(e),s.onload=function(t){a.uploadimg=s.result,a.postData.uploadimg=s.result}}},toRecords:function(){this.$router.push("/repairreport")},handleRepair:function(){var t=this;this.judge()&&this.$ajax.post({url:this.root+"repairorder/insertOrder",data:this.postData}).then(function(a){a.status?t.toRecords():mui.toast("提交失败")})},judge:function(){return this.postData.repairtype?this.postData.appointmenttime?this.postData.contactname?this.postData.concatphone?this.postData.address?this.postData.description?!!s.e.test(this.postData.concatphone)||(mui.toast("请填写有效的手机号码！"),!1):(mui.toast("请填写具体描述！"),!1):(mui.toast("请填写具体地址！"),!1):(mui.toast("请填写联系电话！"),!1):(mui.toast("请填写联系人！"),!1):(mui.toast("请选择预约时间！"),!1):(mui.toast("请选择维修类型！"),!1)}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-container"},[e("div",{staticClass:"back-header"},[e("div",[e("span",{staticClass:"mui-icon mui-icon-arrowleft",on:{click:function(a){return t.goback()}}}),t._v(" "),e("span",[t._v("我要报修")])]),t._v(" "),e("span",{staticClass:"records-span",on:{click:function(a){return t.toRecords()}}},[t._v("报修记录")])]),t._v(" "),e("div",{staticClass:"life-container repair-container"},[e("button",{staticClass:"btn mui-btn mui-btn-block",attrs:{id:"type-btn"},on:{click:function(a){return t.initRepair()}}},[t._m(0),t._v(" "),t._m(1)]),t._v(" "),e("button",{staticClass:"btn mui-btn mui-btn-block",attrs:{id:"type-btn"},on:{click:function(a){return t.initDate()}}},[t._m(2),t._v(" "),t._m(3)]),t._v(" "),e("div",{staticClass:"repair-user-container"},[e("div",{staticClass:"repair-user"},[e("span",{staticClass:"iconfont icon-lianxiren"}),t._v(" "),e("span",{staticClass:"title-span repair-user-title"},[t._v("联系人")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.contactname,expression:"postData.contactname"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入联系人"},domProps:{value:t.postData.contactname},on:{input:function(a){a.target.composing||t.$set(t.postData,"contactname",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"repair-user"},[e("span",{staticClass:"iconfont icon-lianxidianhua"}),t._v(" "),e("span",{staticClass:"title-span repair-user-title"},[t._v("联系电话")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.concatphone,expression:"postData.concatphone"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入联系电话"},domProps:{value:t.postData.concatphone},on:{input:function(a){a.target.composing||t.$set(t.postData,"concatphone",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"repair-user"},[e("span",{staticClass:"iconfont icon-fangjian"}),t._v(" "),e("span",{staticClass:"title-span repair-user-title"},[t._v("具体地址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.address,expression:"postData.address"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入详细地址"},domProps:{value:t.postData.address},on:{input:function(a){a.target.composing||t.$set(t.postData,"address",a.target.value)}}})]),t._v(" "),e("p",[t._v("注：只能报修当前登录房屋")])]),t._v(" "),e("div",{staticClass:"problem-container"},[t._m(4),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.postData.description,expression:"postData.description"}],staticClass:"mui-input-speech",attrs:{type:"textarea",rows:"5",placeholder:"请输入内容"},domProps:{value:t.postData.description},on:{input:function(a){a.target.composing||t.$set(t.postData,"description",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"problem-container"},[t._m(5),t._v(" "),e("div",{staticClass:"upload-container"},[e("button",{staticClass:"upload-btn",on:{click:t.upload}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.uploadimg,expression:"!uploadimg"}],staticClass:"mui-icon mui-icon-plusempty"}),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:t.uploadimg,expression:"uploadimg"}],staticClass:"upload-img",attrs:{src:t.uploadimg}})]),t._v(" "),e("input",{ref:"fileBtn",staticStyle:{display:"none",position:"absolute"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",id:"btn-upload"},on:{change:function(a){return t.changeImage(a)}}})])]),t._v(" "),e("div",{staticClass:"submit-container"},[e("button",{staticClass:"mui-btn submit-btn",attrs:{type:"button"},on:{click:function(a){return t.handleRepair()}}},[t._v("确认提交")])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",{staticClass:"iconfont icon-leixing"}),this._v(" "),a("span",{staticClass:"title-span"},[this._v("维修类型")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",{attrs:{id:"type-result"}},[this._v("点击选择")]),this._v(" "),a("span",{staticClass:"mui-icon mui-icon-arrowright"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",{staticClass:"iconfont icon-shijian"}),this._v(" "),a("span",{staticClass:"title-span"},[this._v("预约时间")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",{attrs:{id:"date-result"}},[this._v("点击选择")]),this._v(" "),a("span",{staticClass:"mui-icon mui-icon-arrowright"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"problem-container-title"},[a("span",{staticClass:"iconfont icon-asterisks-1-copy"}),this._v(" "),a("span",{staticClass:"title-span"},[this._v("请描述您遇到的问题")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"problem-container-title"},[a("span",{staticClass:"iconfont icon-asterisks-1-copy"}),this._v(" "),a("span",{staticClass:"title-span"},[this._v("上传照片")])])}]};var o=e("VU/8")(i,n,!1,function(t){e("CNqc")},"data-v-5a75431b",null);a.default=o.exports},CNqc:function(t,a){}});
//# sourceMappingURL=23.5d247b735b92869da2ee.js.map
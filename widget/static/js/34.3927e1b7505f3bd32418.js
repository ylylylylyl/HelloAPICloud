webpackJsonp([34],{"1XJk":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("Dd8w"),s=a.n(e),n=a("NYxO"),o=a("tyqc"),u=a("Ia3L"),r={components:{Header:o.a},data:function(){return{buildingdata:[{value:1,text:"一单元"},{value:2,text:"二单元"},{value:3,text:"三单元"},{value:4,text:"四单元"},{value:5,text:"五单元"},{value:6,text:"六单元"},{value:1,text:"七单元"},{value:2,text:"八单元"},{value:3,text:"九单元"},{value:4,text:"十单元"},{value:5,text:"十一元"},{value:6,text:"十二单元"}],postData:{village:this.villageId,building:"",houseRoom:"",cardId:"",houseArea:"",houseOwner:"",status:1,phoneNumber:"",chooseAddr:""},tip:"",loading:!1}},computed:s()({},Object(n.c)(["curUserInfo"]),{villagename:function(){return this.$route.query.villagename},villageId:function(){return this.$route.query.villageid},bindid:function(){return!!this.$cookies.get("CUR_BINDINFO")}}),mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},watch:{villageId:function(t){this.postData.village=t},"postData.cardId":{handler:function(t){u.b.test(t)?this.tip="":this.tip="请输入正确的身份证号码"},deep:!0}},methods:{initData:function(){var t=this;mui(".mui-switch").switch(),document.getElementById("mySwitch")&&document.getElementById("mySwitch").addEventListener("toggle",function(i){i.detail.isActive?t.postData.status=1:t.postData.status=0,console.log(t.postData.status)})},initRepair:function(){this.$router.push("/village")},initBuilding:function(){var t=this,i=new mui.PopPicker;i.setData(this.buildingdata);document.getElementById("building-btn");var a=document.getElementById("building-result");i.show(function(i){a.innerText=i[0].text,t.postData.building=i[0].text})},commitBind:function(){var t=this;if(this.judge()){this.tip=null,this.postData.userid=this.curUserInfo.userid,this.postData.village=Number(this.postData.village),this.postData.cardId=Number(this.postData.cardId),this.postData.houseArea=Number(this.postData.houseArea),this.postData.chooseAddr=this.$cookies.get("chooseProvince")+this.$cookies.get("chooseCity")+this.$cookies.get("chooseArea")+this.villagename,this.postData.phoneNumber=Number(this.postData.phoneNumber),this.postData.villageid=Number(this.villageId);this.loading=!0,this.$ajax.post({url:"http://192.168.43.129:8080/bindhouse/bindhousebyuser",data:this.postData}).then(function(i){t.loading=!1,i.status?t.$cookies.get("CUR_BINDINFO")?t.$router.push("/home"):(t.$cookies.set("CUR_BINDINFO",i.object),t.$router.push("/home")):mui.toast(i.msg)},function(i){t.loading=!1})}},judge:function(){return this.villageId?this.postData.building?this.postData.houseRoom?this.postData.houseArea?this.postData.houseOwner?this.postData.cardId?!!this.postData.phoneNumber||(this.tip="请输入手机号码",!1):(this.tip="请输入身份证号码",!1):(this.tip="请输入房屋所有人",!1):(this.tip="请输入房屋面积",!1):(this.tip="请输入房屋号",!1):(this.tip="请选择楼栋",!1):(this.tip="请选择小区",!1)}}},l={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("Header",[t._v("绑定房屋")]),t._v(" "),a("div",{staticClass:"bindhouse-container"},[a("div",{staticClass:"house-info"},[a("div",{staticClass:"info-title"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-fangwu"}})]),t._v(" "),a("span",[t._v("房屋信息")])]),t._v(" "),a("div",{staticClass:"info-content"},[a("button",{staticClass:"btn mui-btn mui-btn-block",attrs:{id:"comm-btn"},on:{click:function(i){return t.initRepair()}}},[t._m(0),t._v(" "),a("div",[t.$route.query.villagename?t._e():a("span",{attrs:{id:"comm-result"}},[t._v("点击选择")]),t._v(" "),t.$route.query.villagename?a("span",{attrs:{id:"comm-result"}},[t._v(t._s(t.villagename))]):t._e(),t._v(" "),a("span",{staticClass:"mui-icon mui-icon-arrowright"})])]),t._v(" "),a("button",{staticClass:"btn mui-btn mui-btn-block",attrs:{id:"building-btn"},on:{click:function(i){return t.initBuilding()}}},[t._m(1),t._v(" "),a("div",[a("span",{attrs:{id:"building-result"}},[t._v(t._s(t.postData.building))]),t._v(" "),a("span",{staticClass:"mui-icon mui-icon-arrowright"})])]),t._v(" "),a("div",{staticClass:"input-container"},[a("span",{staticClass:"input-left"},[t._v("房屋号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.houseRoom,expression:"postData.houseRoom"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋号"},domProps:{value:t.postData.houseRoom},on:{input:function(i){i.target.composing||t.$set(t.postData,"houseRoom",i.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-container"},[a("span",{staticClass:"input-left"},[t._v("房屋面积")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.houseArea,expression:"postData.houseArea"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋面积"},domProps:{value:t.postData.houseArea},on:{input:function(i){i.target.composing||t.$set(t.postData,"houseArea",i.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"user-info"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-yonghu"}})]),t._v(" "),a("span",[t._v("用户信息")]),t._v(" "),a("div",{staticClass:"info-content"},[a("div",{staticClass:"input-container"},[a("span",{staticClass:"input-left"},[t._v("用户名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.houseOwner,expression:"postData.houseOwner"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋所有人"},domProps:{value:t.postData.houseOwner},on:{input:function(i){i.target.composing||t.$set(t.postData,"houseOwner",i.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-container"},[a("span",{staticClass:"input-left"},[t._v("身份证号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.cardId,expression:"postData.cardId"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋所有人身份证号"},domProps:{value:t.postData.cardId},on:{input:function(i){i.target.composing||t.$set(t.postData,"cardId",i.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-container"},[a("span",{staticClass:"input-left"},[t._v("联系电话")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.phoneNumber,expression:"postData.phoneNumber"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋所有人联系电话"},domProps:{value:t.postData.phoneNumber},on:{input:function(i){i.target.composing||t.$set(t.postData,"phoneNumber",i.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),a("span",{staticClass:"tip"},[t._v(t._s(t.tip))])])]),t._v(" "),a("div",{staticClass:"btn-container"},[a("button",{staticClass:"mui-btn mui-btn-primary",attrs:{disabled:!t.judge()&&t.tip,type:"button"},on:{click:function(i){return t.commitBind()}}},[t._v("\n        "+t._s(t.loading?"提交中...":"提交")+"\n      ")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[this._v("小区")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[this._v("楼栋")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"input-container"},[i("span",{staticClass:"input-left"},[this._v("设为默认地址")]),this._v(" "),i("div",{staticClass:"mui-switch mui-switch-mini mui-active",attrs:{id:"mySwitch"}},[i("div",{staticClass:"mui-switch-handle"})])])}]};var c=a("VU/8")(r,l,!1,function(t){a("BNll")},"data-v-5d688f56",null);i.default=c.exports},BNll:function(t,i){}});
//# sourceMappingURL=34.3927e1b7505f3bd32418.js.map
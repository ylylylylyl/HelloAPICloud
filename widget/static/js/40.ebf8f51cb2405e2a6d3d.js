webpackJsonp([40],{"1XJk":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("Dd8w"),s=e.n(a),n=e("NYxO"),o=e("tyqc"),u=e("Ia3L"),r={components:{Header:o.a},data:function(){return{buildingdata:[{value:1,text:"一单元"},{value:2,text:"二单元"},{value:3,text:"三单元"},{value:4,text:"四单元"},{value:5,text:"五单元"},{value:6,text:"六单元"},{value:1,text:"七单元"},{value:2,text:"八单元"},{value:3,text:"九单元"},{value:4,text:"十单元"},{value:5,text:"十一元"},{value:6,text:"十二单元"}],postData:{village:this.villageId,building:"",houseRoom:"",cardId:"",houseArea:"",houseOwner:"",status:1,phoneNumber:"",chooseAddr:""},tip:"",loading:!1}},computed:s()({},Object(n.c)(["curUserInfo"]),{villagename:function(){return this.$route.query.villagename},villageId:function(){return this.$route.query.villageid},bindid:function(){return!!this.$cookies.get("CUR_BINDINFO")}}),mounted:function(){var t=this;mui(".mui-switch").switch(),document.getElementById("mySwitch").addEventListener("toggle",function(i){i.detail.isActive?t.postData.status=1:t.postData.status=0,console.log(t.postData.status)})},watch:{villageId:function(t){this.postData.village=t},"postData.cardId":{handler:function(t){u.b.test(t)?this.tip="":this.tip="请输入正确的身份证号码"},deep:!0}},methods:{initRepair:function(){this.$router.push("/village")},initBuilding:function(){var t=this,i=new mui.PopPicker;i.setData(this.buildingdata);document.getElementById("building-btn");var e=document.getElementById("building-result");i.show(function(i){e.innerText=i[0].text,t.postData.building=i[0].text})},commitBind:function(){var t=this;if(this.judge()){this.tip=null,this.postData.userid=this.curUserInfo.userid,this.postData.village=Number(this.postData.village),this.postData.cardId=Number(this.postData.cardId),this.postData.houseArea=Number(this.postData.houseArea),this.postData.chooseAddr=this.$cookies.get("chooseProvince")+this.$cookies.get("chooseCity")+this.$cookies.get("chooseArea")+this.villagename,this.postData.phoneNumber=Number(this.postData.phoneNumber),this.postData.villageid=Number(this.villageId);this.loading=!0,this.$ajax.post({url:"http://192.168.43.129:8080/bindhouse/bindhousebyuser",data:this.postData}).then(function(i){t.loading=!1,i.status?(console.log(!t.$cookies.get("CUR_BINDINFO")),t.$cookies.get("CUR_BINDINFO")?t.$router.push("/home"):(console.log(1111111111),t.$cookies.set("CUR_BINDINFO",i.object),t.$router.push("/home"))):mui.toast(i.msg)},function(i){t.loading=!1})}},judge:function(){return this.villageId?this.postData.building?this.postData.houseRoom?this.postData.houseArea?this.postData.houseOwner?this.postData.cardId?!!this.postData.phoneNumber||(this.tip="请输入手机号码",!1):(this.tip="请输入身份证号码",!1):(this.tip="请输入房屋所有人",!1):(this.tip="请输入房屋面积",!1):(this.tip="请输入房屋号",!1):(this.tip="请选择楼栋",!1):(this.tip="请选择小区",!1)}}},l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("Header",[t._v("绑定房屋")]),t._v(" "),e("div",{staticClass:"bindhouse-container"},[e("div",{staticClass:"house-info"},[e("div",{staticClass:"info-title"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-fangwu"}})]),t._v(" "),e("span",[t._v("房屋信息")])]),t._v(" "),e("div",{staticClass:"info-content"},[e("button",{staticClass:"btn mui-btn mui-btn-block",attrs:{id:"comm-btn"},on:{click:function(i){return t.initRepair()}}},[t._m(0),t._v(" "),e("div",[t.$route.query.villagename?t._e():e("span",{attrs:{id:"comm-result"}},[t._v("点击选择")]),t._v(" "),t.$route.query.villagename?e("span",{attrs:{id:"comm-result"}},[t._v(t._s(t.villagename))]):t._e(),t._v(" "),e("span",{staticClass:"mui-icon mui-icon-arrowright"})])]),t._v(" "),e("button",{staticClass:"btn mui-btn mui-btn-block",attrs:{id:"building-btn"},on:{click:function(i){return t.initBuilding()}}},[t._m(1),t._v(" "),e("div",[e("span",{attrs:{id:"building-result"}},[t._v(t._s(t.postData.building))]),t._v(" "),e("span",{staticClass:"mui-icon mui-icon-arrowright"})])]),t._v(" "),e("div",{staticClass:"input-container"},[e("span",{staticClass:"input-left"},[t._v("房屋号")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.houseRoom,expression:"postData.houseRoom"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋号"},domProps:{value:t.postData.houseRoom},on:{input:function(i){i.target.composing||t.$set(t.postData,"houseRoom",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"input-container"},[e("span",{staticClass:"input-left"},[t._v("房屋面积")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.houseArea,expression:"postData.houseArea"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋面积"},domProps:{value:t.postData.houseArea},on:{input:function(i){i.target.composing||t.$set(t.postData,"houseArea",i.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"user-info"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-yonghu"}})]),t._v(" "),e("span",[t._v("用户信息")]),t._v(" "),e("div",{staticClass:"info-content"},[e("div",{staticClass:"input-container"},[e("span",{staticClass:"input-left"},[t._v("用户名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.houseOwner,expression:"postData.houseOwner"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋所有人"},domProps:{value:t.postData.houseOwner},on:{input:function(i){i.target.composing||t.$set(t.postData,"houseOwner",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"input-container"},[e("span",{staticClass:"input-left"},[t._v("身份证号")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.cardId,expression:"postData.cardId"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋所有人身份证号"},domProps:{value:t.postData.cardId},on:{input:function(i){i.target.composing||t.$set(t.postData,"cardId",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"input-container"},[e("span",{staticClass:"input-left"},[t._v("联系电话")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.phoneNumber,expression:"postData.phoneNumber"}],staticClass:"mui-input-clear inout-right",attrs:{type:"text",placeholder:"请输入房屋所有人联系电话"},domProps:{value:t.postData.phoneNumber},on:{input:function(i){i.target.composing||t.$set(t.postData,"phoneNumber",i.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),e("span",{staticClass:"tip"},[t._v(t._s(t.tip))])])]),t._v(" "),e("div",{staticClass:"btn-container"},[e("button",{staticClass:"mui-btn mui-btn-primary",attrs:{disabled:!t.judge()&&t.tip,type:"button"},on:{click:function(i){return t.commitBind()}}},[t._v("\n        "+t._s(t.loading?"提交中...":"提交")+"\n      ")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[this._v("小区")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[this._v("楼栋")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"input-container"},[i("span",{staticClass:"input-left"},[this._v("设为默认地址")]),this._v(" "),i("div",{staticClass:"mui-switch mui-switch-mini mui-active",attrs:{id:"mySwitch"}},[i("div",{staticClass:"mui-switch-handle"})])])}]};var c=e("VU/8")(r,l,!1,function(t){e("J9Be")},"data-v-2b89d08f",null);i.default=c.exports},J9Be:function(t,i){}});
//# sourceMappingURL=40.ebf8f51cb2405e2a6d3d.js.map
webpackJsonp([36],{Sivn:function(t,e){},o7NV:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),r=s("Xxa5"),i=s.n(r),c=s("exGp"),o=s.n(c),u=s("NYxO"),h=s("PJh5"),l=s.n(h),m={components:{Nothing:s("+pfy").a},mounted:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.onGetContactUserList(),e.next=3,t.getFriends();case 3:console.log(t.friendList);case 4:case"end":return e.stop()}},e,t)}))()},computed:n()({},Object(u.c)({contact:"onGetContactUserList",msgList:"onGetCurrentChatObjMsg",friendList:"friends"}),{userList:function(){return{contact:this.contact.filter(function(t){if(t)return t}),group:this.group,chatroom:this.chatroom}},chatList:function(){return this.$store.state.chat.msgList},getKey:function(t){var e="";switch(this.type){case"contact":e=t.name;break;case"group":e=t.groupid;break;case"chatroom":e=t.id}return e},username:function(){return this.$route.query.username}}),data:function(){return{root:"http://192.168.43.129:8080/",friends:[]}},props:["type"],methods:n()({},Object(u.b)(["onLogout","onGetFirendBlack","onGetContactUserList","getFriends"]),{renderTime:function(t){var e=new Date,s=t?new Date(t):e;return l()(s).format("MM-DD hh:mm A")},getLastMsg:function(t){var e=this.chatList.contact[t.touser]||[],s="",a=e.length&&e[e.length-1].type;return e.length&&(s="img"===a?"[image]":"file"===a?e[e.length-1].filename:"audio"===a?"[audio]":"vidio"===a?"[vidio]":e[e.length-1].msg),{lastMsg:s,msgTime:e.length?this.renderTime(e[e.length-1].time):""}},select2:function(t){this.$router.push("/chat/message/"+t.touser+"/"+this.username+"/"+t.username)},getUnreadNum:function(t){var e=this.$route,s=(e.name,e.params,0);return(this.chatList.contact[t.touser]||[]).forEach(function(t){"read"===t.status||"recall"===t.status||t.bySelf||s++}),s},init:function(){var t=this;this.$ajax.post({url:this.root+"chat/selectFriends",data:{userphone:this.username}}).then(function(e){e.status&&(t.friends=e.result)})}}),filters:{avatar:function(t){return t.charAt(t.length-1)}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"messagebox-container"},[t.userList.contact.length?t._e():s("Nothing"),t._v(" "),t._l(t.friendList,function(e){return s("div",{staticClass:"item",on:{click:function(s){return t.select2(e)}}},[e.avatar?t._e():s("div",{staticClass:"avatar"},[s("span",{staticClass:"avatar-span"},[t._v(t._s(t._f("avatar")(e.username)))])]),t._v(" "),e.avatar?s("img",{staticClass:"avatar",attrs:{src:e.avatar}}):t._e(),t._v(" "),s("div",{staticClass:"message-container"},[s("div",{staticClass:"message-info"},[s("div",[s("span",{staticClass:"message-name"},[t._v(t._s(e.username))]),t._v(" "),0!=t.getUnreadNum(e)?s("div",{staticClass:"icon-style"},[s("span",{staticClass:"unreadNum"},[t._v(t._s(t.getUnreadNum(e)))])]):t._e()]),t._v(" "),s("span",{staticClass:"time-style"},[t._v(t._s(t.getLastMsg(e).msgTime))])]),t._v(" "),s("div",{staticClass:"message-detail"},[t._v(t._s(t.getLastMsg(e).lastMsg))])])])})],2)},staticRenderFns:[]};var d=s("VU/8")(m,g,!1,function(t){s("Sivn")},"data-v-5bb79407",null);e.default=d.exports}});
//# sourceMappingURL=36.92b8750821ff2b80796f.js.map